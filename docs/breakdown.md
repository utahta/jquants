# J-Quants API 売買内訳データ項目概要

このドキュメントは、J-Quants APIの売買内訳エンドポイント (`/markets/breakdown`) のレスポンスデータ項目について説明します。

## データ型について
- フィールドは `String` 型または `Number` 型で返されます
- 金額の単位は円です
- 株数の単位は株です

## エンドポイント概要

### 売買内訳データ (/markets/breakdown)

#### 概要
- **エンドポイント**: `https://api.jquants.com/v1/markets/breakdown`
- **HTTPメソッド**: GET
- **説明**: 東証上場銘柄の東証市場における銘柄別の日次売買代金・売買高（立会内取引に限る）について、信用取引や空売りの利用に関する発注時のフラグ情報を用いて細分化したデータです。

#### 本APIの留意点
- 当該銘柄のコーポレートアクションが発生した場合も、遡及して約定株数の調整は行われません
- 2020/10/1は東京証券取引所の株式売買システムの障害により終日売買停止となった関係で、データが存在しません

#### リクエストパラメータ

データの取得では、銘柄コード（code）または日付（date）の指定が必須となります。

| パラメータ名 | 型 | 必須 | 説明 | 例 |
|------------|-----|------|------|-----|
| code | String | いいえ* | 銘柄コード | 27800 or 2780 |
| date | String | いいえ* | 基準となる日付 | 20210907 or 2021-09-07 |
| from | String | いいえ | 期間の開始日 | 20210901 or 2021-09-01 |
| to | String | いいえ | 期間の終了日 | 20210907 or 2021-09-07 |
| pagination_key | String | いいえ | 検索の先頭を指定する文字列 | 過去の検索で返却されたpagination_key |

\* codeまたはdateのいずれかは必須

**注意事項**:
- 4桁の銘柄コードを指定した場合は、普通株式と優先株式の両方が上場している銘柄においては普通株式のデータのみが取得されます

#### レスポンスフィールド

##### 基本情報

| フィールド名 | 日本語説明 | 型 | 備考 |
|------------|----------|-----|------|
| Date | 売買日 | String | YYYY-MM-DD形式 |
| Code | 銘柄コード | String | |

##### 売りの約定代金内訳

| フィールド名 | 日本語説明 | 型 | 備考 |
|------------|----------|-----|------|
| LongSellValue | 実売りの約定代金 | Number | 単位：円 |
| ShortSellWithoutMarginValue | 空売り（信用新規売りを除く）の約定代金 | Number | 単位：円 |
| MarginSellNewValue | 信用新規売りの約定代金 | Number | 新たな信用売りポジションを作るための売り注文、単位：円 |
| MarginSellCloseValue | 信用返済売りの約定代金 | Number | 既存の信用買いポジションを閉じるための売り注文、単位：円 |

##### 買いの約定代金内訳

| フィールド名 | 日本語説明 | 型 | 備考 |
|------------|----------|-----|------|
| LongBuyValue | 現物買いの約定代金 | Number | 単位：円 |
| MarginBuyNewValue | 信用新規買いの約定代金 | Number | 新たな信用買いポジションを作るための買い注文、単位：円 |
| MarginBuyCloseValue | 信用返済買いの約定代金 | Number | 既存の信用売りポジションを閉じるための買い注文、単位：円 |

##### 売りの約定株数内訳

| フィールド名 | 日本語説明 | 型 | 備考 |
|------------|----------|-----|------|
| LongSellVolume | 実売りの約定株数 | Number | 単位：株 |
| ShortSellWithoutMarginVolume | 空売り（信用新規売りを除く）の約定株数 | Number | 単位：株 |
| MarginSellNewVolume | 信用新規売りの約定株数 | Number | 新たな信用売りポジションを作るための売り注文、単位：株 |
| MarginSellCloseVolume | 信用返済売りの約定株数 | Number | 既存の信用買いポジションを閉じるための売り注文、単位：株 |

##### 買いの約定株数内訳

| フィールド名 | 日本語説明 | 型 | 備考 |
|------------|----------|-----|------|
| LongBuyVolume | 現物買いの約定株数 | Number | 単位：株 |
| MarginBuyNewVolume | 信用新規買いの約定株数 | Number | 新たな信用買いポジションを作るための買い注文、単位：株 |
| MarginBuyCloseVolume | 信用返済買いの約定株数 | Number | 既存の信用売りポジションを閉じるための買い注文、単位：株 |

## 使用上の注意事項

1. **データの取得制限**
   - 銘柄コード（code）または日付（date）の指定が必須
   - レスポンスが大きすぎる場合はpagination_keyを使用して分割取得

2. **データの内容について**
   - 立会内取引のみが対象（立会外取引は含まれない）
   - 東証市場における取引のみが対象

3. **コーポレートアクションの影響**
   - 株式分割・併合等が発生しても約定株数の遡及調整は行われない
   - 過去データ分析時は注意が必要

4. **特殊なケース**
   - 2020/10/1：システム障害により全データなし

## データの解釈

このAPIは売買の内訳を詳細に分類して提供します：

- **実売り**: 保有株式の売却
- **空売り**: 株式を借りて売却（信用新規売りを除く）
- **信用新規売り**: 新規の信用売りポジション構築
- **信用返済売り**: 信用買いポジションの返済
- **現物買い**: 通常の株式購入
- **信用新規買い**: 新規の信用買いポジション構築
- **信用返済買い**: 信用売りポジションの返済

## サンプルレスポンス

```json
{
    "breakdown": [
        {
            "Date": "2015-04-01", 
            "Code": "13010", 
            "LongSellValue": 115164000.0,
            "ShortSellWithoutMarginValue": 93561000.0, 
            "MarginSellNewValue": 6412000.0, 
            "MarginSellCloseValue": 23009000.0, 
            "LongBuyValue": 185114000.0, 
            "MarginBuyNewValue": 35568000.0, 
            "MarginBuyCloseValue": 17464000.0, 
            "LongSellVolume": 415000.0, 
            "ShortSellWithoutMarginVolume": 337000.0, 
            "MarginSellNewVolume": 23000.0, 
            "MarginSellCloseVolume": 83000.0, 
            "LongBuyVolume": 667000.0, 
            "MarginBuyNewVolume": 128000.0, 
            "MarginBuyCloseVolume": 63000.0
        }
    ],
    "pagination_key": "value1.value2."
}
```

## 関連情報

このAPIは売買内訳の詳細データを提供するものです。関連する他のAPIについては以下を参照してください：
- 株価四本値：`/prices/daily_quotes`
- 投資部門別情報：`/markets/trades_spec`
- 信用取引週末残高：`/markets/weekly_margin_interest`
- 業種別空売り比率：`/markets/short_selling`
- 空売り残高報告：`/markets/short_selling_positions`